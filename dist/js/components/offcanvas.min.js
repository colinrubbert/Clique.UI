/*!
 *  CliqueUI - v1.0.4 - 2016-07-12
 *  http://ui.cliquestudios.com
 *  Copyright (c) 2016 Clique Studios;
 */

!function(a){if("function"==typeof define&&define.amd&&define("clique-offcanvas",["clique"],function(){return a(Clique)}),!window.Clique)throw new Error("Clique.offcanvas requires Clique.core");window.Clique&&a(Clique)}(function(a){var b,c,d,e,f,g;b=a.$,g={x:window.scrollX,y:window.scrollY},e=a.$win,c=a.$doc,d=a.$html,f={show:function(b){var e,f,h,i;b=a.$(b),b.length&&(e=b.find(".offcanvas-bar").first(),i="right"===a.langdirection,h=e.hasClass("offcanvas-bar-flip")?-1:1,f=h*(i?-1:1),g={x:window.pageXOffset,y:window.pageYOffset},b.addClass("active"),a.$body.css({width:window.innerWidth,height:window.innerHeight}).addClass("offcanvas-page"),a.$body.css(i?"margin-right":"margin-left",(i?-1:1)*(e.outerWidth()*f)).width(),d.css("margin-top",g.y*-1),e.addClass("offcanvas-bar-show"),this._initElement(b),c.trigger("show.clique.offcanvas",[b,e]),b.attr("aria-hidden","false"))},hide:function(b){var c,e,f,h;if(f=a.$(".offcanvas.active"),h="right"===a.langdirection,c=f.find(".offcanvas-bar").first(),e=function(){return a.$body.removeClass("offcanvas-page").css({width:"",height:"","margin-left":"","margin-right":""}),f.removeClass("active"),c.removeClass("offcanvas-bar-show"),d.css("margin-top",""),window.scrollTo(g.x,g.y),a.$doc.trigger("hide.clique.offcanvas",[f,c]),f.attr("aria-hidden","true")},f.length)return a.support.transition&&!b?(a.$body.one(a.support.transition.end,function(){return e()}).css(h?"margin-right":"margin-left",""),setTimeout(function(){return c.removeClass("offcanvas-bar-show")},0)):e()},_initElement:function(b){if(!b.data("OffcanvasInit"))return b.on("click.clique.offcanvas swipeRight.clique.offcanvas swipeLeft.clique.offcanvas",function(b){var c;if(c=a.$(b.target),!b.type.match(/swipe/)&&!c.hasClass("offcanvas-close")){if(c.hasClass("offcanvas-bar"))return;if(c.parents(".offcanvas-bar").first().length)return}return b.stopImmediatePropagation(),f.hide()}),b.on("click","a[href^='#']",function(c){var d;if(b=a.$(this),d=b.attr("href"),"#"!==d)return a.$doc.one("hide.clique.offcanvas",function(){var b;return b=a.$(d),b.length||(b=a.$('[name="'+d.replace("#","")+'"]')),a.utils.scrollToElement&&b.length?a.utils.scrollToElement(b):void(window.location.href=d)}),f.hide()}),b.data("OffcanvasInit",!0)}},a.component("offcanvasTrigger",{boot:function(){return d.on("click.offcanvas.clique","[data-offcanvas]",function(b){var c,d;if(b.preventDefault(),c=a.$(this),!c.data("clique.data.offcanvasTrigger"))return d=a.offcanvasTrigger(c,a.utils.options(c.attr("data-offcanvas"))),c.trigger("click")}),d.on("keydown.clique.offcanvas",function(a){if(27===a.keyCode)return f.hide()})},init:function(){var b;return b=this,this.options=a.$.extend({target:!!b.element.is("a")&&b.element.attr("href")},this.options),this.on("click",function(a){return a.preventDefault(),f.show(b.options.target)})}}),a.offcanvas=f});